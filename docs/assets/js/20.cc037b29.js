(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{221:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"initial-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initial-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Initial setup")]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("p",[t._v("Chief is a package based site management system built on top of the laravel framework.\nChief is the admin dashboard for your project. There are no assumptions made for the project site logic and structure.")]),t._v(" "),s("p",[t._v("Chief is a laravel specific package. It can be installed in a fresh or existing laravel application. You install the latest version of the package via composer.\nLaravel version "),s("code",[t._v("5.7.1")]),t._v(" is a minimum requirement.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("composer "),s("span",{attrs:{class:"token keyword"}},[t._v("require")]),t._v(" thinktomorrow"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("chief\n")])])]),s("p",[t._v("The package will automatically register its service provider to hook into your application.")]),t._v(" "),s("h3",{attrs:{id:"application-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Application setup")]),t._v(" "),s("h4",{attrs:{id:"exception-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exception-handler","aria-hidden":"true"}},[t._v("#")]),t._v(" Exception handler")]),t._v(" "),s("p",[t._v("Next edit the application exception handler to extend the chief exception handler.\nThe Chief Exception handler takes care of the admin authentication and authorization.\nIn the "),s("code",[t._v("App\\Exceptions\\Handler")]),t._v(" file extend the class as such:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Exceptions\\Handler.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exceptions"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" ChiefExceptionHandler"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ChiefExceptionHandler")]),t._v("\n")])])]),s("h4",{attrs:{id:"middleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" Middleware")]),t._v(" "),s("p",[t._v("Add the "),s("code",[t._v("\\Thinktomorrow\\Chief\\App\\Http\\Middleware\\AuthenticateChiefSession::class")]),t._v(" middleware to your "),s("code",[t._v("App\\Http\\Kernel")]),t._v(" file.\nYou should place these in a "),s("code",[t._v("web-chief")]),t._v(" middleware group like so:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$middlewareGroups")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'web-chief'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateChiefSession")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Next in the same file we should add the following entries to the $routeMiddleware array.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$routeMiddleware")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'auth.superadmin'")]),t._v("       "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateSuperadmin")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-guest'")]),t._v("           "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefRedirectIfAuthenticated")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-validate-invite'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefValidateInvite")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'role'")]),t._v("                  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RoleMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'permission'")]),t._v("            "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PermissionMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("From laravel version 5.7.19, there is an "),s("code",[t._v("App\\Http\\Middleware\\Authenticate")]),t._v(" middleware in the app folder which contains a predefined "),s("code",[t._v("login")]),t._v(" route. This will break behaviour if you do not have a login route defined.\nIn order to redirect non-logged users to the chief login page, you should change this named route to "),s("code",[t._v("chief.back.login")]),t._v(".\nIf you have upgraded your project from an older version of Laravel you might not have this file.\nMake sure you add this file: "),s("a",{attrs:{href:"https://github.com/laravel/laravel/blob/master/app/Http/Middleware/Authenticate.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("Authenticate.php"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("The redirectTo function should end up looking like this:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Middleware\\Authenticate.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("redirectTo")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$request")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token variable"}},[t._v("$request")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("expectsJson")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("route")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief.back.login'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"config-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-assets","aria-hidden":"true"}},[t._v("#")]),t._v(" Config & Assets")]),t._v(" "),s("p",[t._v("The next step is to publish the chief-assets to our public folder.\nIf you want to overwrite existing files you can add the "),s("code",[t._v("--force")]),t._v(" flag here.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("assets\n")])])]),s("p",[t._v("Publish the chief config to "),s("code",[t._v("config/thinktomorrow/chief")]),t._v(" as this will require you to set some application defaults such as\ncontact email and application name.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("config\n")])])]),s("p",[t._v("Make sure to set at least the "),s("code",[t._v("name")]),t._v(" value to your project name as it is used in some of the generator commands. Ideally this should match\nthe namespace of your "),s("code",[t._v("src")]),t._v(" folder, if you have any. Make sure to namespace the src folder in your composer.json to match this name.")]),t._v(" "),s("p",[t._v("The following vendor assets should also be published to your application:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// The dimsav translatable package")]),t._v("\nphp artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("translatable\n")])])]),s("p",[t._v("This will create the translatable config file "),s("code",[t._v("config/translatable.php")]),t._v(", this is where you edit what languages are available in the chief admin panel.")]),t._v(" "),s("h3",{attrs:{id:"database-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Database setup")]),t._v(" "),s("p",[t._v("Connect a database with your application and make sure you have set the proper database credentials in your "),s("code",[t._v(".env")]),t._v(" file.")]),t._v(" "),s("p",[t._v("Next perform the migrate artisan command. This will automatically run the chief migrations as well.\nNote that Chief has separate tables for the chief admin users, "),s("code",[t._v("chief-users")]),t._v(" and "),s("code",[t._v("chief_password_resets")]),t._v(". This way there\nis no interference with your application user logic.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan migrate\n")])])]),s("p",[t._v("Next we need at least one main admin user to login and start managing the admin panel.\nThis command will create the basic roles and permissions and allows to setup the first developer account:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan chief"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("developer\n")])])]),s("h3",{attrs:{id:"known-issues"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#known-issues","aria-hidden":"true"}},[t._v("#")]),t._v(" Known issues")]),t._v(" "),s("p",[t._v("Chief has a few dependencies which may conflict with your current project dependencies. Chief makes use of the\n"),s("code",[t._v("spatie/laravel-permission")]),t._v(" package and this does expect only one permission based role system. So if your project\nrequires the same package but for a second permission-based setup, you need to consider this possible conflict.")]),t._v(" "),s("h2",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started","aria-hidden":"true"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),s("h3",{attrs:{id:"registration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registration","aria-hidden":"true"}},[t._v("#")]),t._v(" Registration")]),t._v(" "),s("p",[t._v("In the "),s("code",[t._v("app/Providers")]),t._v(" folder add a file named "),s("code",[t._v("ChiefProjectServiceProvider")]),t._v(". This file can be used to register all your manageable models.\nAn example of this is:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Providers")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Pages"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PageManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Providers"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefProjectServiceProvider")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" BaseChiefProjectServiceProvider"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ChiefProjectServiceProvider")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("BaseChiefProjectServiceProvider")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Boot core registrations")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("parent")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{attrs:{class:"token comment"}},[t._v("// Example of registering event pages")]),t._v("\n        "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerPage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'events'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PageManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Events"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Event")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Make sure to add this service provider to your "),s("code",[t._v("config/app.php")]),t._v(" file:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("\\"),s("span",{attrs:{class:"token package"}},[t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Providers"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefProjectServiceProvider")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("h3",{attrs:{id:"define-chief-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#define-chief-routes","aria-hidden":"true"}},[t._v("#")]),t._v(" Define chief routes")]),t._v(" "),s("p",[t._v("Out of the box, there are two project routes required by chief: "),s("code",[t._v("pages.show")]),t._v(" and "),s("code",[t._v("pages.home")]),t._v(". You can "),s("router-link",{attrs:{to:"/src/chief/pages.html#using-a-custom-route-resolver"}},[t._v("change these")]),t._v(" if you'd need to.\nIn your route file you should add the following:")],1),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# routes/web.php")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// Homepage route")]),t._v("\nRoute"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'/'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PagesController"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'@homepage'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("name")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'pages.home'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/**\n * Catch all routing\n *\n * This catch-all will point to a generic chief pages controller that directs the request\n * to the proper published page. It will handle the homepage '/' as well. Place this\n * routing at the end of your route definitions to avoid routes not being triggered.\n */")]),t._v("\nRoute"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'{slug}'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PagesController"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'@show'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("name")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'pages.show'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("where")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'slug'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'(.*)?'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"chief-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chief-controller","aria-hidden":"true"}},[t._v("#")]),t._v(" Chief controller")]),t._v(" "),s("p",[t._v("Besides the route definitions, we should add the following PagesController which will serve as the generic handler for all page requests.\nYou are free to create your own logic or extend according to your project. You can use the following code as a starting point.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App/Http/Controller/PagesController.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controllers")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Symfony"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Component"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("HttpKernel"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exception"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("NotFoundHttpException")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Pages"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Homepage")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Pages"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Page")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("PagesController")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("show")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$slug")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Page"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("findPublishedBySlug")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$slug")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("NotFoundHttpException")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'No published page found by slug ['")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token variable"}},[t._v("$slug")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("']'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Homepage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("is")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("redirect")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("route")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'pages.home'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("view")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("homepage")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Homepage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("guess")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("view")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"chief-view"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chief-view","aria-hidden":"true"}},[t._v("#")]),t._v(" Chief view")]),t._v(" "),s("p",[t._v("Next, we'll need a default view that is responsible for displaying all managed pages. You can choose either "),s("code",[t._v("views/pages/show.blade.php")]),t._v(" or "),s("code",[t._v("views/front/pages/show.blade.php")]),t._v(".\nThe one required method to render the chief content in the view is "),s("code",[t._v("$page->renderChildren()")]),t._v(".")]),t._v(" "),s("p",[t._v("So as a bare minimum the "),s("code",[t._v("pages.show")]),t._v(" view should contain:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# resources/views/pages/show.blade.php")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$page")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("renderChildren")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"first-page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#first-page","aria-hidden":"true"}},[t._v("#")]),t._v(" First page")]),t._v(" "),s("p",[t._v("Now that all this setup is done, let's go to the chief admin panel and create our first page.\nGo to the "),s("code",[t._v("/admin")]),t._v(" route and login with your newly created credentials to access the admin panel.")]),t._v(" "),s("p",[t._v("Now let's click on pages in the navbar at the top and let's create our homepage.")]),t._v(" "),s("h3",{attrs:{id:"homepage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#homepage","aria-hidden":"true"}},[t._v("#")]),t._v(" Homepage")]),t._v(" "),s("p",[t._v("Once you have added your pages, you should choose which one will be the homepage. This is currently set in the "),s("code",[t._v("thinktomorrow/chief-settings.php")]),t._v(" config file.\nHere you can explicitly set the page that is considered to be the website homepage. If this homepage value is left empty, the first "),s("strong",[t._v("published")]),t._v(" page is used as a default.")]),t._v(" "),s("h3",{attrs:{id:"localization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localization","aria-hidden":"true"}},[t._v("#")]),t._v(" Localization")]),t._v(" "),s("p",[t._v("When coding in Europe, you'll probably need to provide your site in more than one language. Localization is built into the core of Chief.\nIn order to manage the locales, you need to configure the following files:")]),t._v(" "),s("ul",[s("li",[t._v("Set the available locales of the application in the "),s("code",[t._v("config/translatable.php")]),t._v(" file. These are the locales in which each page should be made available.")]),t._v(" "),s("li",[t._v("Set the frontend locales of the application in the "),s("code",[t._v("config/thinktomorrow/locale.php")]),t._v(" file. These locales are available for the users of your application.")]),t._v(" "),s("li",[t._v("Set the default and fallback locale in the "),s("code",[t._v("config/app.php")]),t._v(" file. Keep in mind that this value needs to consist of one of the available locales as set in the "),s("code",[t._v("config/translatable.php")]),t._v(".")])]),t._v(" "),s("p",[s("em",[t._v("Owkey looks like the basics are done and you are all set to kickstart your project development!")])]),t._v(" "),s("h2",{attrs:{id:"upgrading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upgrading","aria-hidden":"true"}},[t._v("#")]),t._v(" Upgrading")]),t._v(" "),s("p",[t._v("The latest version of Chief is "),s("code",[t._v("0.2.*")]),t._v(" which is the one being currently developed upon.\nPlease note that the "),s("code",[t._v("0.1")]),t._v(" release is only maintained for security fixes and critical bugfixes.")]),t._v(" "),s("h3",{attrs:{id:"updating-chief-inside-your-project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updating-chief-inside-your-project","aria-hidden":"true"}},[t._v("#")]),t._v(" Updating chief inside your project")]),t._v(" "),s("p",[t._v("Chief follows the semantic versioning and we always try to maintain a backward compatible release cycle.\nThe major version will include breaking changes and features that are not backward compatible. For each major version, we will\nprovide an upgrade guide to make this process as painless as possible.\nThe minor version will contain new features or deprecations that are still backward compatible.\nThe patch version is used for bugfixes and is safe to update in your current chief version.")]),t._v(" "),s("p",[t._v("First run the "),s("code",[t._v("composer update thinktomorrow/chief")]),t._v(" command. This will update Chief to the latest version, according to your version constraints.")]),t._v(" "),s("p",[t._v("Next update the chief assets by running "),s("code",[t._v("php artisan vendor:publish --tag=chief-assets --force")]),t._v(" in your project root. This will update all style and script assets.")]),t._v(" "),s("h3",{attrs:{id:"upgrading-a-project-from-0-1-to-0-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-a-project-from-0-1-to-0-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Upgrading a project from 0.1.* to 0.2.*")]),t._v(" "),s("p",[t._v("The upgrade from 0.1 to 0.2 is not considered an official upgrade. This is because the "),s("code",[t._v("0.1")]),t._v(" version is a unsupported development phase. Nonetheless, we do have some key elements you should pay attention to while upgrading.")]),t._v(" "),s("p",[t._v("First update the "),s("code",[t._v("thinktomorrow/chief")]),t._v(" dependency to "),s("code",[t._v("~0.2")]),t._v(" in your "),s("code",[t._v("composer.json")]),t._v(" file.")]),t._v(" "),s("p",[t._v("Pay attention to the following changes:")]),t._v(" "),s("ul",[s("li",[t._v("You need to change a couple of migration entries due to assetlibrary major version upgrade. Table (squanto, media, asset) already exists: migrations table -> change the keys to the following : 2019_01_10_154910_create_asset_table, 2019_01_10_154909_create_media_table, 2019_01_10_154902_create_squanto_tables")]),t._v(" "),s("li",[t._v("assetlibrary 0.5 uses the name + conversion as filename. This is different from previous versions where this was not the default behaviour e.g. full.jpg becomes heroname-full.jpg")]),t._v(" "),s("li",[t._v("run migrations for extra default tables for asset library")])]),t._v(" "),s("h4",{attrs:{id:"updating-pre-refactor-managers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updating-pre-refactor-managers","aria-hidden":"true"}},[t._v("#")]),t._v(" Updating pre-refactor managers")]),t._v(" "),s("p",[t._v("The Linking of managers to models has changed from the chief config file to a serviceprovider.\nLets first create our ChiefProjectServiceProvider and start linking our collection from the config file.")]),t._v(" "),s("p",[t._v("To link a page, use the provided PageManager.\nTo link a module, use the provided ModuleManager.\nYou can also define your own manager for custom classes. We will go into this custom manager later.")]),t._v(" "),s("p",[t._v("Before:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# config/chief.php")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'collections'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Pages")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'singles'")]),t._v("  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Singles\\"),s("span",{attrs:{class:"token package"}},[t._v("Single")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Modules")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'banner'")]),t._v("  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Banner"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("After:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# providers/ChiefProjectServiceProvider.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Boot core registrations")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("parent")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Managers")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'singles'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PageManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Single"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//Module Managers")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'banner'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ModuleManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Banner"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//Custom Classes")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'members'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MemberManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Member"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Next up the ManagementDefaults have been removed and aside from implemementing the ModelManagers we now also extend from an AbstractManager.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MemberManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AbstractManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ModelManager")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("If the model in question needs publishing or previewing functionality there are traits we can use and interfaces to implement.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MemberManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AbstractManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ModelManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ManagerThatPublishes"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ManagerThatPreviews\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("ManagesPublishing")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ManagesPreviews"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"contributing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contributing","aria-hidden":"true"}},[t._v("#")]),t._v(" Contributing")]),t._v(" "),s("h2",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq","aria-hidden":"true"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),s("h3",{attrs:{id:"i-get-the-route-login-not-defined-error-help"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-get-the-route-login-not-defined-error-help","aria-hidden":"true"}},[t._v("#")]),t._v(' I get the "Route [login] not defined" error. Help!')]),t._v(" "),s("p",[t._v("Extend our ChiefExceptionHandler in the "),s("code",[t._v("app/handler.php")]),t._v(" file. This is because the chief admin uses a custom guard and does not rely on the default auth laravel routes.")]),t._v(" "),s("h3",{attrs:{id:"i-get-the-tokenmismatch-error-after-login-into-the-admin-help"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-get-the-tokenmismatch-error-after-login-into-the-admin-help","aria-hidden":"true"}},[t._v("#")]),t._v(' I get the "Tokenmismatch" error after login into the admin. Help!')]),t._v(" "),s("p",[t._v("This most likely means you have an outdated version of chief. Run 'composer update' to get the latest version.\nIf this error persists you might have some middleware that's interfering with the login/session process.")]),t._v(" "),s("h3",{attrs:{id:"i-get-the-class-web-chief-does-not-exist-error-help"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-get-the-class-web-chief-does-not-exist-error-help","aria-hidden":"true"}},[t._v("#")]),t._v(' I get the "Class web-chief does not exist" error. Help!')]),t._v(" "),s("p",[t._v("Add the "),s("code",[t._v("AuthenticateChiefSession::class")]),t._v(" middleware group to your "),s("code",[t._v("App\\Http\\Kernel.php")]),t._v(" file.")]),t._v(" "),s("h3",{attrs:{id:"i-get-the-expected-response-code-250-but-got-code-“530”-with-message-“530-5-7-1-authentication-required-”-error-help"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-get-the-expected-response-code-250-but-got-code-“530”-with-message-“530-5-7-1-authentication-required-”-error-help","aria-hidden":"true"}},[t._v("#")]),t._v(" I get the 'Expected response code 250 but got code “530”, with message “530 5.7.1 Authentication required ”' error. Help!")]),t._v(" "),s("p",[t._v("Please make sure your mail settings in your .env file are correct.")]),t._v(" "),s("h3",{attrs:{id:"mysql-index-length-bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-index-length-bug","aria-hidden":"true"}},[t._v("#")]),t._v(" MySQL index length bug")]),t._v(" "),s("p",[t._v("Add following snippet in the AppServiceProvider of your project if you use MySQL older than 5.7.7\nref: https://laravel.com/docs/master/migrations#creating-indexes\n"),s("code",[t._v("Schema::defaultStringLength(191)")])]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Providers\\AppServiceProvider.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Illuminate"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Facades"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Schema")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("/**\n * Bootstrap any application services.\n *\n * @return void\n */")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Schema"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("defaultStringLength")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("191")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"local-chief-development"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#local-chief-development","aria-hidden":"true"}},[t._v("#")]),t._v(" Local Chief development")]),t._v(" "),s("p",[t._v("For local development of chief we need another project to include the Chief package into since a package does not contain the whole laravel framework.\nTo set up the chief package for local development we link our local chief folder as a repository in the composer.json file.")]),t._v(" "),s("p",[t._v("Paste the following snippet in your composer.json file. This can be placed right above the 'require' section.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"repositories"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"url"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"/full/path/to/chief"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n           "),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"type"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"path"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n           "),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"options"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               "),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"symlinks"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n           "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("The url property needs to be the full path to the local version of the chief package.")]),t._v(" "),s("p",[t._v("Next install the local version of Chief. If you already had an installed chief in your vendor folder, make sure to remove it first, otherwise composer will not force the local symlink.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("composer "),s("span",{attrs:{class:"token keyword"}},[t._v("require")]),t._v(" thinktomorrow"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("chief"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"@dev"')]),t._v("\n")])])]),s("p",[t._v("Make sure your minimum stability of the application is set to "),s("code",[t._v("dev")]),t._v(".")]),t._v(" "),s("p",[t._v("To migrate and scaffold some entries you can run:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan chief"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("refresh\n")])])]),s("p",[s("strong",[t._v("Note that this will remove your existing database entries!")])]),t._v(" "),s("p",[t._v("// TODO: something about adding to semver, changelog...")])])},[],!1,null,null,null);e.options.__file="initial_setup.md";a.default=e.exports}}]);