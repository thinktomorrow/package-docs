(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{175:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("h2",{attrs:{id:"package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package","aria-hidden":"true"}},[t._v("#")]),t._v(" Package")]),t._v(" "),s("p",[t._v("Chief can be installed in a blank or existing laravel application. You install the package via composer.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("composer "),s("span",{attrs:{class:"token keyword"}},[t._v("require")]),t._v(" thinktomorrow"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("chief\n")])])]),s("p",[t._v("The package will automatically register its service provider to hook into your application.")]),t._v(" "),s("h2",{attrs:{id:"application-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Application setup")]),t._v(" "),s("h3",{attrs:{id:"exception-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exception-handler","aria-hidden":"true"}},[t._v("#")]),t._v(" Exception handler")]),t._v(" "),s("p",[t._v("Next edit the application exception handler to extend the chief exception handler.\nThe Chief Exception handler takes care of the admin authentication and authorization.\nIn the "),s("code",[t._v("App\\Exceptions\\Handler")]),t._v(" file extend the class as such:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Exceptions\\Handler.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exceptions"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" ChiefExceptionHandler"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ChiefExceptionHandler")]),t._v("\n")])])]),s("h3",{attrs:{id:"middleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" Middleware")]),t._v(" "),s("p",[t._v("Add the "),s("code",[t._v("AuthenticateChiefSession::class")]),t._v(" middleware to your "),s("code",[t._v("App\\Http\\Kernel")]),t._v(" file.\nYou should place these in a "),s("code",[t._v("web-chief")]),t._v(" middleware group like so:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$middlewareGroups")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'web-chief'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateChiefSession")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Next in the same file we should add the following entries to the $routeMiddleware array.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$routeMiddleware")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'auth.superadmin'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" AuthenticateSuperadmin"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-guest'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefRedirectIfAuthenticated")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-validate-invite'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefValidateInvite")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'role'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RoleMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'permission'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PermissionMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"database-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Database setup")]),t._v(" "),s("p",[t._v("Connect a database with your application and make sure you have set the proper database credentials in your "),s("code",[t._v(".env")]),t._v(" file.")]),t._v(" "),s("p",[t._v("Next perform the migrate artisan command. This will automatically run the chief migrations as well.\nNote that Chief has separate tables for the chief admin users, "),s("code",[t._v("chief-users")]),t._v(" and "),s("code",[t._v("chief_password_resets")]),t._v(". This way there\nis no interference with your application user logic.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan migrate\n")])])]),s("p",[t._v("Next we need at least one main admin user to login and start managing the admin panel.\nThis command will create the basic roles and permissions and allows to setup the first admin account:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan chief"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("admin\n")])])]),s("h3",{attrs:{id:"config-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config-assets","aria-hidden":"true"}},[t._v("#")]),t._v(" Config & Assets")]),t._v(" "),s("p",[t._v("The next step is to publish the chief-assets to our public folder.\nIf you want to overwrite existing files you can add the "),s("code",[t._v("--force")]),t._v(" flag here.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("assets\n")])])]),s("p",[t._v("Publish the chief config to "),s("code",[t._v("config/thinktomorrow/chief")]),t._v(" as this will require you to set some application defaults such as\ncontact email and application name.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("config\n")])])]),s("p",[t._v("Make sure to set at least the "),s("code",[t._v("name")]),t._v(" value to your project name as it is used in some of the generator commands. Ideally this should match\nthe namespace of your "),s("code",[t._v("src")]),t._v(" folder, if you have any. Make sure to namespace the src folder in your composer.json to match this name.")]),t._v(" "),s("p",[t._v("The following vendor assets should also be published to your application:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// The dimsav translatable package")]),t._v("\nphp artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("translatable\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// The thinktomorrow locale package")]),t._v("\nphp artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("provider"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"Thinktomorrow\\Locale\\LocaleServiceProvider"')]),t._v("\n")])])])])}],!1,null,null,null);e.options.__file="installation.md";a.default=e.exports}}]);