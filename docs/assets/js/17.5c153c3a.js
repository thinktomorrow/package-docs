(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{186:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"upgrade-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-guide","aria-hidden":"true"}},[t._v("#")]),t._v(" Upgrade guide")]),t._v(" "),s("p",[t._v("The latest version of Chief is "),s("code",[t._v("0.2")]),t._v(" which is the one being currently developed upon.\nPlease note that the "),s("code",[t._v("0.1")]),t._v(" release is only maintained for security fixes and critical bugfixes.")]),t._v(" "),s("h2",{attrs:{id:"updating-chief-inside-your-project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updating-chief-inside-your-project","aria-hidden":"true"}},[t._v("#")]),t._v(" Updating chief inside your project")]),t._v(" "),s("p",[t._v("Chief follows the semantic versioning and we always try to maintain a backward compatible release cycle.\nThe major version will include breaking changes and features that are not backward compatible. For each major version, we will\nprovide an upgrade guide to make this process as painless as possible.\nThe minor version will contain new features or deprecations that are still backward compatible.\nThe patch version is used for bugfixes and is safe to update in your current chief version.")]),t._v(" "),s("p",[t._v("First run the "),s("code",[t._v("composer update thinktomorrow/chief")]),t._v(" command. This will update Chief to the latest version, according to your version constraints.")]),t._v(" "),s("p",[t._v("Next update the chief assets by running "),s("code",[t._v("php artisan vendor:publish --tag=chief-assets --force")]),t._v(" in your project root. This will update all style and script assets.")]),t._v(" "),s("h2",{attrs:{id:"upgrading-a-project-from-0-1-to-0-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-a-project-from-0-1-to-0-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Upgrading a project from 0.1.* to 0.2.*")]),t._v(" "),s("p",[t._v("The upgrade from 0.1 to 0.2 is not considered an official upgrade. This is because the "),s("code",[t._v("0.1")]),t._v(" version is a unsupported development phase. Nonetheless, we do have some key elements you should pay attention to while upgrading.")]),t._v(" "),s("p",[t._v("First update the "),s("code",[t._v("thinktomorrow/chief")]),t._v(" dependency to "),s("code",[t._v("~0.2")]),t._v(" in your "),s("code",[t._v("composer.json")]),t._v(" file.")]),t._v(" "),s("p",[t._v("Pay attention to the following changes:")]),t._v(" "),s("ul",[s("li",[t._v("You need to change a couple of migration entries due to assetlibrary major version upgrade. Table (squanto, media, asset) already exists: migrations table -> change the keys to the following : 2019_01_10_154910_create_asset_table, 2019_01_10_154909_create_media_table, 2019_01_10_154902_create_squanto_tables")]),t._v(" "),s("li",[t._v("assetlibrary 0.5 gebruikt in bestandsnaam telkens de name + conversion. Dit is anders dan het huidige gedrag waarbij enkel de conversion werd opgevraagd. bv. full.jpg wordt nu heroname-full.jpg")]),t._v(" "),s("li",[t._v("run migrations for extra default tables for asset library")])]),t._v(" "),s("h3",{attrs:{id:"updating-pre-refactor-managers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updating-pre-refactor-managers","aria-hidden":"true"}},[t._v("#")]),t._v(" Updating pre-refactor managers")]),t._v(" "),s("p",[t._v("The Linking of managers to models has changed from the chief config file to a serviceprovider.\nLets first create our ProjectServiceProvider and start linking our collection from the config file.")]),t._v(" "),s("p",[t._v("To link a page, use the provided PageManager.\nTo link a module, use the provided ModuleManager.\nYou can also define your own manager for custom classes. We will go into this custom manager later.")]),t._v(" "),s("p",[t._v("Before:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# config/chief.php")]),t._v("\n\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'collections'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Pages")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'singles'")]),t._v("  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Singles\\"),s("span",{attrs:{class:"token package"}},[t._v("Single")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Modules")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'banner'")]),t._v("  "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Banner"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("p",[t._v("After:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# providers/ChiefProjectServiceProvider.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Boot core registrations")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("parent")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token function"}},[t._v("boot")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("// Managers")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'singles'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PageManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Single"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//Module Managers")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'banner'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ModuleManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Banner"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{attrs:{class:"token comment"}},[t._v("//Custom Classes")]),t._v("\n    "),s("span",{attrs:{class:"token variable"}},[t._v("$this")]),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token function"}},[t._v("registerManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'members'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MemberManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Member"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Next up the ManagementDefaults have been removed and aside from implemementing the ModelManagers we now also extend from an AbstractManager.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MemberManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AbstractManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ModelManager")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("If the model in question needs publishing or previewing functionality there are traits we can use and interfaces to implement.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MemberManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("AbstractManager")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ModelManager")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ManagerThatPublishes"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ManagerThatPreviews\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("ManagesPublishing")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ManagesPreviews"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}],!1,null,null,null);e.options.__file="upgrade-guide.md";a.default=e.exports}}]);