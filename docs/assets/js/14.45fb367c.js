(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{183:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),s("p",[t._v("The package will automatically register its service provider to hook into your application.")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),s("p",[t._v("Next in the same file we should add the following entries to the $routeMiddleware array.")]),t._v(" "),t._m(11),s("p",[t._v("From laravel version 5.7.19, there is an "),s("code",[t._v("App\\Http\\Middleware\\Authenticate")]),t._v(" middleware in the app folder which contains a predefined "),s("code",[t._v("login")]),t._v(" route. This will break behaviour if you do not have a login route defined.\nIn order to redirect non-logged users to the chief login page, you should change this named route to "),s("code",[t._v("chief.back.login")]),t._v(".\nIf you have upgraded your project from an older version of Laravel you might not have this file.\nMake sure you add this file: "),s("a",{attrs:{href:"https://github.com/laravel/laravel/blob/master/app/Http/Middleware/Authenticate.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("Authenticate.php"),s("OutboundLink")],1)]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),s("p",[t._v("Next we need at least one main admin user to login and start managing the admin panel.\nThis command will create the basic roles and permissions and allows to setup the first admin account:")]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),s("p",[t._v("The following vendor assets should also be published to your application:")]),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package","aria-hidden":"true"}},[this._v("#")]),this._v(" Package")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Chief is a laravel specific package. It can be installed in a fresh or existing laravel application. You install the latest version of the package via composer.\nLaravel version "),a("code",[this._v("5.7.1")]),this._v(" is a minimum requirement.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[this._v("composer "),a("span",{attrs:{class:"token keyword"}},[this._v("require")]),this._v(" thinktomorrow"),a("span",{attrs:{class:"token operator"}},[this._v("/")]),this._v("chief\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"application-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-setup","aria-hidden":"true"}},[this._v("#")]),this._v(" Application setup")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"exception-handler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exception-handler","aria-hidden":"true"}},[this._v("#")]),this._v(" Exception handler")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Next edit the application exception handler to extend the chief exception handler.\nThe Chief Exception handler takes care of the admin authentication and authorization.\nIn the "),a("code",[this._v("App\\Exceptions\\Handler")]),this._v(" file extend the class as such:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Exceptions\\Handler.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Exceptions"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" ChiefExceptionHandler"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Handler")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("ChiefExceptionHandler")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[this._v("#")]),this._v(" Middleware")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Add the "),a("code",[this._v("\\Thinktomorrow\\Chief\\App\\Http\\Middleware\\AuthenticateChiefSession::class")]),this._v(" middleware to your "),a("code",[this._v("App\\Http\\Kernel")]),this._v(" file.\nYou should place these in a "),a("code",[this._v("web-chief")]),this._v(" middleware group like so:")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$middlewareGroups")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'web-chief'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateChiefSession")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token shell-comment comment"}},[t._v("# App\\Http\\Kernel.php")]),t._v("\n\n"),s("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{attrs:{class:"token variable"}},[t._v("$routeMiddleware")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'auth.superadmin'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AuthenticateSuperadmin")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-guest'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefRedirectIfAuthenticated")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'chief-validate-invite'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Thinktomorrow"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Chief"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("App"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ChiefValidateInvite")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'role'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RoleMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'permission'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),s("span",{attrs:{class:"token package"}},[t._v("Spatie"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Permission"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middlewares"),s("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PermissionMiddleware")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"database-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#database-setup","aria-hidden":"true"}},[this._v("#")]),this._v(" Database setup")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Connect a database with your application and make sure you have set the proper database credentials in your "),a("code",[this._v(".env")]),this._v(" file.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Next perform the migrate artisan command. This will automatically run the chief migrations as well.\nNote that Chief has separate tables for the chief admin users, "),a("code",[this._v("chief-users")]),this._v(" and "),a("code",[this._v("chief_password_resets")]),this._v(". This way there\nis no interference with your application user logic.")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[this._v("php artisan migrate\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[this._v("php artisan chief"),a("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v("admin\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"config-assets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-assets","aria-hidden":"true"}},[this._v("#")]),this._v(" Config & Assets")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("The next step is to publish the chief-assets to our public folder.\nIf you want to overwrite existing files you can add the "),a("code",[this._v("--force")]),this._v(" flag here.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("assets\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Publish the chief config to "),a("code",[this._v("config/thinktomorrow/chief")]),this._v(" as this will require you to set some application defaults such as\ncontact email and application name.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("php artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("chief"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("config\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Make sure to set at least the "),a("code",[this._v("name")]),this._v(" value to your project name as it is used in some of the generator commands. Ideally this should match\nthe namespace of your "),a("code",[this._v("src")]),this._v(" folder, if you have any. Make sure to namespace the src folder in your composer.json to match this name.")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// The dimsav translatable package")]),t._v("\nphp artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("tag"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("translatable\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("// The thinktomorrow locale package")]),t._v("\nphp artisan vendor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("publish "),s("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("provider"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"Thinktomorrow\\Locale\\LocaleServiceProvider"')]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"known-issues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#known-issues","aria-hidden":"true"}},[this._v("#")]),this._v(" Known issues")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("Chief has a few dependencies which may conflict with your current project dependencies. Chief makes use of the\n"),a("code",[this._v("spatie/laravel-permission")]),this._v(" package and this does expect only one permission based role system. So if your project\nrequires the same package but for an second permission-based setup, you need to consider this possible conflict.")])}],!1,null,null,null);n.options.__file="installation.md";a.default=n.exports}}]);