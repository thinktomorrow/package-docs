<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Google Tag Manager | Think Tomorrow Documentation</title>
    <meta name="description" content="Think Tomorrow documentation and guidelines">
    
    
    <link rel="preload" href="/package-docs/assets/css/0.styles.0f205980.css" as="style"><link rel="preload" href="/package-docs/assets/js/app.eacf28b8.js" as="script"><link rel="preload" href="/package-docs/assets/js/15.4c09306e.js" as="script"><link rel="prefetch" href="/package-docs/assets/js/2.7e7c8b61.js"><link rel="prefetch" href="/package-docs/assets/js/3.848b1712.js"><link rel="prefetch" href="/package-docs/assets/js/4.411141df.js"><link rel="prefetch" href="/package-docs/assets/js/5.a61e4597.js"><link rel="prefetch" href="/package-docs/assets/js/6.dbf2225a.js"><link rel="prefetch" href="/package-docs/assets/js/7.8818dd23.js"><link rel="prefetch" href="/package-docs/assets/js/8.0ac0506b.js"><link rel="prefetch" href="/package-docs/assets/js/9.aa10686d.js"><link rel="prefetch" href="/package-docs/assets/js/10.7da3a085.js"><link rel="prefetch" href="/package-docs/assets/js/11.f644374b.js"><link rel="prefetch" href="/package-docs/assets/js/12.0acfe291.js"><link rel="prefetch" href="/package-docs/assets/js/13.cc65f59e.js"><link rel="prefetch" href="/package-docs/assets/js/14.75a0e1fd.js"><link rel="prefetch" href="/package-docs/assets/js/16.75d87f0e.js"><link rel="prefetch" href="/package-docs/assets/js/17.0399ff27.js"><link rel="prefetch" href="/package-docs/assets/js/18.a6dd5f57.js"><link rel="prefetch" href="/package-docs/assets/js/19.7dfd7ed1.js">
    <link rel="stylesheet" href="/package-docs/assets/css/0.styles.0f205980.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/package-docs/" class="home-link router-link-active"><!----> <span class="site-name">Think Tomorrow Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/package-docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/package-docs/src/guidelines/index.html" class="nav-link">Guidelines</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Projects</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/package-docs/src/chief/initial_setup.html" class="nav-link">Chief</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/assetlibrary/guide/installation.html" class="nav-link">Assetlibrary</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/squanto/" class="nav-link">Squanto</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/locale/" class="nav-link">Locale</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/thinktomorrow/chief" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chief Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/thinktomorrow/package-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docs Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/package-docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/package-docs/src/guidelines/index.html" class="nav-link">Guidelines</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Projects</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/package-docs/src/chief/initial_setup.html" class="nav-link">Chief</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/assetlibrary/guide/installation.html" class="nav-link">Assetlibrary</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/squanto/" class="nav-link">Squanto</a></li><li class="dropdown-item"><!----> <a href="/package-docs/src/locale/" class="nav-link">Locale</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/thinktomorrow/chief" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chief Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/thinktomorrow/package-docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docs Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/package-docs/src/guidelines/" class="sidebar-link">Guidelines</a></li><li><a href="/package-docs/src/guidelines/trello-workflow.html" class="sidebar-link">Trello workflow</a></li><li><a href="/package-docs/src/guidelines/git-workflow.html" class="sidebar-link">Git workflow</a></li><li><a href="/package-docs/src/guidelines/gtm.html" class="active sidebar-link">Google Tag Manager</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#basic-setup" class="sidebar-link">Basic setup</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#initial-setup" class="sidebar-link">Initial Setup</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#usage" class="sidebar-link">Usage</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#basic-pageview-ga-tracking" class="sidebar-link">Basic pageview GA tracking</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#custom-js-html-tags" class="sidebar-link">Custom JS/HTML tags</a></li><li class="sidebar-sub-header"><a href="/package-docs/src/guidelines/gtm.html#ga-event-tracking" class="sidebar-link">GA event tracking</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="google-tag-manager"><a href="#google-tag-manager" aria-hidden="true" class="header-anchor">#</a> Google Tag Manager</h1> <p>We use GTM to implement tags or analytics tracking without needing to change the code every time.</p> <h2 id="basic-setup"><a href="#basic-setup" aria-hidden="true" class="header-anchor">#</a> Basic setup</h2> <p>You can use a gist for the basic GTM container setup or if you want to set up the container yourself start <a href="#getting-started">here</a>.</p> <p>To get started with the gist download the .json here: <a href="https://gist.github.com/yinx/8d161ee56e786f983fd5eabcb3b199b7" target="_blank" rel="noopener noreferrer">https://gist.github.com/yinx/8d161ee56e786f983fd5eabcb3b199b7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Create a new container/account in GTM first.
Then go to Admin in the top left and select import container.
This is where you upload the .json.</p> <p>You can create a new workspace or import it in the current workspace.</p> <p>Now the only thing to do is to set your analytics id in the 'Google analytics id' variable.</p> <p>And you're ready to start tracking the basics with Google Analytics</p> <h2 id="getting-started"><a href="#getting-started" aria-hidden="true" class="header-anchor">#</a> Getting started</h2> <p>To get started with Tag manager go to <a href="https://tagmanager.google.com/" target="_blank" rel="noopener noreferrer">https://tagmanager.google.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/package-docs/assets/img/createAccount.706e811c.png" alt="Create Acount"></p> <p>To create a new account, this is usually on company level, click the create account button at the top.</p> <p><img src="/package-docs/assets/img/createContainer.cc0a3932.png" alt="Create Container"></p> <p>If you already have an account you can click the create container button in the dropdown.</p> <p>Fill in the needed information and we're ready to get our Tag Manager started.</p> <p>Before we move on to adding tags we get a pop-up with our Tag Manager snippets.</p> <p><img src="/package-docs/assets/img/GTMSnippet.c0b7011d.png" alt="GTM Snippet"></p> <p>If you want you can add this to the website already or it's always accessible by clicking on your GTM ID on your dashboard.</p> <p><img src="/package-docs/assets/img/SnippetLocation.5e4ee1f4.png" alt="Snippet Location"></p> <h2 id="initial-setup"><a href="#initial-setup" aria-hidden="true" class="header-anchor">#</a> Initial Setup</h2> <p>Welcome to your Workspace. It will look something like this.</p> <p><img src="/package-docs/assets/img/workspace.ea848b42.png" alt="Workspace"></p> <p>To make it easier for testing and to keep our tracking properties clean we use a lookup table.
This lookup table will switch the Analytics id based on the current page hostname.
This way we can split up our tracking on different properties for localization or just for testing.</p> <p>So let's start of creating this variable. Go to the Variable tab and click the new button for user-defined variables.</p> <p><img src="/package-docs/assets/img/createVariable.60a6811e.png" alt="create Variable"></p> <p>Next we click the big card to open the variable type selection.
In this sidebar scroll down a bit until you get to the utilities section. There we can select 'Lookup Table'.</p> <p><img src="/package-docs/assets/img/createLookup.413ddc1b.png" alt="create Lookup"></p> <p>As input we choose 'Page Hostname'.</p> <p>Next click 'Add Row' to start setting up the properties we want.
As a basic setup we create a production property and link that to the live domain.</p> <p>A staging property can be set up if we want to test analytics implementations on the staging environment.</p> <p>You can define properties per locale if the situation calls for it.</p> <p>Lastly we advise to set up your local urls to a dummy analytics property to test if GTM passes the data as we would expect.
You can also set the default value to this dummy property.</p> <p>After this we end up with something like this:
<img src="/package-docs/assets/img/lookuptable.4fad627e.png" alt="Lookup table"></p> <h3 id="using-this-new-variable"><a href="#using-this-new-variable" aria-hidden="true" class="header-anchor">#</a> Using this new variable.</h3> <p>To use this we need to create a 'Google Analytics settings' variable type and select the lookup table as tracking ID.</p> <p><img src="/package-docs/assets/img/trackingid.da18a397.png" alt="Tracking id"></p> <p>Now that we have the lookup table as a GA variable, we can link this variable to the tags that need the GA id.</p> <h2 id="usage"><a href="#usage" aria-hidden="true" class="header-anchor">#</a> Usage</h2> <p>As far as usage of GTM goes, we use the features that GTM provides us like versioning and previewing.
Every tag/variable/trigger/etc you create are changes in your workspace.
These changes have no effect until you preview them.</p> <p><img src="/package-docs/assets/img/workspace.ea848b42.png" alt="Workspace"></p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>If you submit your changes every site with this tag will have these changes applied!</p></div> <p>When you press preview, GTM will place a cookie in your browser that triggers the GTM debug bar if the corresponding GTM tag is detected on a page you're browsing.</p> <p><img src="/package-docs/assets/img/preview.f4d7dff8.png" alt="preview"></p> <p>This banner means your preview mode is activated for this GTM property.</p> <p>If we then browse to a site with this tag, we see the following debug bar.</p> <p><img src="/package-docs/assets/img/debug.67034b2c.png" alt="debug"></p> <p>After we checked all these changes we can publish the changes as a new version which then will be active on all the sites that implement this tag.</p> <h2 id="basic-pageview-ga-tracking"><a href="#basic-pageview-ga-tracking" aria-hidden="true" class="header-anchor">#</a> Basic pageview GA tracking</h2> <p>Basic pageview tracking with GTM is very easy.</p> <ul><li>create a new tag</li> <li>select 'Google Analytics - Universal Analytics'</li> <li>choose pageview track type</li> <li>assuming you have set up the lookup table variable, choose that variable for the 'Google Analytics settings'</li> <li>choose a trigger</li> <li>click the + in the top right to add a new trigger</li> <li>create a page view trigger</li> <li>select all pages</li></ul> <h2 id="custom-js-html-tags"><a href="#custom-js-html-tags" aria-hidden="true" class="header-anchor">#</a> Custom JS/HTML tags</h2> <p>To implement pure html/js snippets like hotjar/smartlook/hubspot/etc we can create a tag for that as well.</p> <p>Create a new tag and select Custom HTML.</p> <p>Input the custom tag here and select a trigger. Most often you will want this to trigger on every page but you may want to change this based on your needs.</p> <h2 id="ga-event-tracking"><a href="#ga-event-tracking" aria-hidden="true" class="header-anchor">#</a> GA event tracking</h2> <p>There are multiple ways to implement event tracking using GTM and analytics.
We list a few ways that we use the most here.</p> <h3 id="basic-event-tracking"><a href="#basic-event-tracking" aria-hidden="true" class="header-anchor">#</a> Basic event tracking</h3> <p>Setting up basic event tracking as fairly easy using GTM.
We would use this way of tracking if the following applies:</p> <ul><li>don't have access or don't want to change the codebase</li> <li>classes on the elements you want to track are unique enough</li></ul> <p>If these are the case we can start by creating a 'Google Analytics - Universal Analytics' tag.
Select 'Event' as the track type.</p> <p>Next you can fill in the tracking parameters.</p> <ul><li>category</li> <li>action</li> <li>label</li> <li>value</li></ul> <p>Set the Google Analytics setting to the Lookup table Variable.</p> <p>Now the triggering of event tracking is a little more complicated.</p> <p>Most of the time you will use click triggers.
To create a click trigger:</p> <ul><li>click on triggering</li> <li>click the + in the top right corner to create a new trigger
Choose one of the following:
<ul><li>select 'just links' to trigger clicks on links.
<ul><li>select 'some link clicks'</li> <li>choose the link conditionals</li></ul></li> <li>select 'all elements' to trigger clicks on all elements
<ul><li>select 'some clicks'</li> <li>choose the conditionals that trigger this tag</li></ul></li></ul></li></ul> <p>More complex triggering is possible but these most often require some developer input.</p> <h3 id="trigger-on-data-attributes"><a href="#trigger-on-data-attributes" aria-hidden="true" class="header-anchor">#</a> Trigger on data-attributes</h3> <p>The second way is to use data-attributes in the codebase.
We would use this way of tracking if the following applies:</p> <ul><li>have access to the codebase</li> <li>classes on the elements you want to track are not unique enough</li> <li>we need to trigger multiple events with predefined catagory/label/actions</li></ul> <p>It is also possible to trigger a click or anything really on a data- attribute you define yourself.
Let me run you through how to set this up.</p> <p>First lets define a new variable of the type 'data-layer-variable'.</p> <p>Then as the name, and this is the key, we set 'gtm.element.dataset.' and then anything you want.
For us this is 'gtm.element.dataset.event'.</p> <p>Now we can use this variable in every trigger to check whether this value is what we want to track.</p> <p>For instance:
If we want to track a button we can add 'data-event=&quot;buttonTrack&quot;' on the button, try to make it as unique as possible.</p> <p>Next as the trigger we just select data-event from the dropdown and set the equals to 'buttonTrack'.</p> <p><img src="/package-docs/assets/img/dataEvent.f00315a6.png" alt="event"></p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>When adding tracking on elements that are or contain svg's the click might not bubble up to the correct element.
If you encounter this make sure to add <code>pointer-events:none;</code> to the svg and all sub-elements.</p></div> <h3 id="dynamic-event-setup"><a href="#dynamic-event-setup" aria-hidden="true" class="header-anchor">#</a> Dynamic event setup</h3> <p>The third way is to use a dynamic event which is filled through the data layer.
We would use this way of tracking if the following applies:</p> <ul><li>have access to the codebase</li> <li>classes on the elements you want to track are not unique enough</li> <li>we need to trigger multiple events with dynamic category, label or action that we want to pass along from the code.</li></ul> <p>Sometimes it can be easier to set up your events in the code instead of in GTM.
One simple way to do this is to configure a dynamic event in GTM.</p> <p>First we create a 'data-layer variable' for each one of our event variables.
So create a variable for the event action, category, description, label, value.</p> <p><img src="/package-docs/assets/img/datalayerVariable.5f0b27b2.png" alt="event"></p> <p>The name you choose for these variables are the keys we will use in our datalayer to link our inputs to GTM.</p> <p><img src="/package-docs/assets/img/dynamicEvent.224e3957.png" alt="event"></p> <p>The last step is to add a trigger that listens to the event name. In this case that would be 'HubspotForm' but you can choose something more general or more specific as you prefer.</p> <p><img src="/package-docs/assets/img/dynamicEventTrigger.b528165b.png" alt="event"></p> <p>And that is it. Now we can push events to the datalayer and the GTM tags will capture and fire the events with the names you have defined in your code.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/13/2019, 3:17:32 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/package-docs/src/guidelines/git-workflow.html" class="prev">
          Git workflow
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/package-docs/assets/js/15.4c09306e.js" defer></script><script src="/package-docs/assets/js/app.eacf28b8.js" defer></script>
  </body>
</html>
